# Aito Generated Ecommerce Dataset

## Overview

The dataset contains the following 5 tables. See [schema.json](schema.json) for the full schema.

| Table  | Description | Number of records |
| ------------- | ------------- |:------:|
| users  | Containing the users' information: id, name, address, etc. | 1000 |
| products  | Containing the product's information: id, description, price, etc. | 10143 |
| orders  | Containing the order's information: id, customer's id, the products and its quantity | 26610 |
| invoices | Containing the invoice's information: order's id, supplier, sales rep, warehouse | 25976 |
| impressions  | Contain past customer behavior: query, product clicked, product purchased, etc. | 87777 |

The data is a combination of real data and synthetic data:

* The products are taken from [kaggle](https://www.kaggle.com/PromptCloudHQ/all-jc-penny-products) under CC BY-SA 4.0 lincense. It is a pre-crawled dataset, taken as subset of a bigger [dataset](https://www.promptcloud.com/datastock-access-ready-to-use-datasets) (more than 3.7 million products) that was created by extracting data from jcpenney.com, a well known retailer
* The rest of the tables are generated by us for demo purposes.

## Uploading the data to Aito

**Warning:** doing this will delete all data in the Aito instance!

Set your API key and environment with:

```bash
export AITO_ENV=my-aito-env
export API_KEY=YOUR_READ_WRITE_KEY_HERE
```

and then run `bash upload.sh`. 


## Generation rules
### Users
* Name: Users' names are generated from a list of most common names in U.S
* Age: Users' age are randomly assigned to follow [the world population pyramid in 2017](https://www.populationpyramid.net/world/2017/)
* Address: Users' addressed are generated based on real address in Finland, with random street number. The street, city, and postal code is queried from [openstreetmaps API](https://wiki.openstreetmap.org/wiki/API_v0.6)
* Email address: Users' email addresses are generated based on the user name, with several domains
* Gender: Gender are generated based on the information of the user name, with a probability for a name commonly assigned for a gender.

### Orders
The orders are generated based on users. 80% of the users would order products. Users will be assigned a spending bucket among ```[(100, 200), (300, 500), (600, 1000), (1000, 1500), (2000, 5000)]``` so that the budget proportion of the buying users would be ```[0.4, 0.2, 0.2, 0.1, 0.1]```.
Each user will have "main interests" and "sub interests" which are randomly chosen product's category. User would buy more from the main interest and buy less from the sub interest. Each order total amount of money (based on the product price and random quantity) will always be less than the user's spending budget.

### Invoices
The invoices is generated based on the orders but with 3 extra information:
* "sales_rep": A sales representation is assigned based on the user spending history. If the user total amount of spending is larger than 1500, they are assigned a specific sales rep. Other wise, the user is assigned to a sale rep based on his/her spending bracket. A user can also be assigned to a "newly_hired_sales_rep" if the user order is recent.
* "distributor": Distributor is assigned based on the user's city. Each city might or might not have a distributor. If the city does not have a distributor, it will be assigned to its closest neighbor's distributor.
* "warehouse": Warehouse is assigned based on the product's quantity (large or small warehouse) and the product's price (special warehouse for luxury item)

### Impressions
The impressions data is generated based on the orders. Bought products's information (name, description, category) are used to generate the user query. The query is used to find similar products and each product is assigned a probability to be clicked.
